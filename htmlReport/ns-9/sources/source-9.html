


<!DOCTYPE html>
<html id="htmlId">
<head>
  <meta http-equiv="Content-Type" content="text/html;charset=UTF-8"> 
  <title>Coverage Report > PersonajeViewKt</title>
  <style type="text/css">
    @import "../../css/coverage.css";
    @import "../../css/idea.min.css";
  </style>
  <script type="text/javascript" src="../../js/highlight.min.js"></script>
  <script type="text/javascript" src="../../js/highlightjs-line-numbers.min.js"></script>
</head>

<body>
<div class="content">
<div class="breadCrumbs">
Current scope:     <a href="../../index.html">all classes</a>
    <span class="separator">|</span>
    <a href="../index.html">com.example.proyectodd.view</a>
</div>

<h1>Coverage Summary for Class: PersonajeViewKt (com.example.proyectodd.view)</h1>

<table class="coverageStats">

<tr>
  <th class="name">Class</th>
<th class="coverageStat 
">
  Method, %
</th>
<th class="coverageStat 
">
  Branch, %
</th>
<th class="coverageStat 
">
  Line, %
</th>
</tr>
<tr>
  <td class="name">PersonajeViewKt</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/57)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/46)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/332)
  </span>
</td>
</tr>
  <tr>
    <td class="name">PersonajeViewKt$CardDndForm$3$1</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/1)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/78)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/19)
  </span>
</td>
  </tr>
<tr>
  <td class="name"><strong>Total</strong></td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/58)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/124)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/351)
  </span>
</td>
</tr>
</table>

<br/>
<br/>


<pre>
<code class="sourceCode" id="sourceCode">&nbsp;package com.example.proyectodd.view
&nbsp;
&nbsp;import android.Manifest
&nbsp;import android.content.Context
&nbsp;import android.net.Uri
&nbsp;import android.os.Environment
&nbsp;import androidx.activity.compose.rememberLauncherForActivityResult
&nbsp;import androidx.activity.result.contract.ActivityResultContracts
&nbsp;import androidx.compose.foundation.Image
&nbsp;import androidx.compose.foundation.background
&nbsp;import androidx.compose.foundation.border
&nbsp;import androidx.compose.foundation.clickable
&nbsp;import androidx.compose.foundation.layout.*
&nbsp;import androidx.compose.foundation.rememberScrollState
&nbsp;import androidx.compose.foundation.shape.RoundedCornerShape
&nbsp;import androidx.compose.foundation.text.KeyboardOptions
&nbsp;import androidx.compose.foundation.verticalScroll
&nbsp;import androidx.compose.material3.*
&nbsp;import androidx.compose.runtime.*
&nbsp;import androidx.compose.runtime.saveable.rememberSaveable
&nbsp;import androidx.compose.ui.Alignment
&nbsp;import androidx.compose.ui.Modifier
&nbsp;import androidx.compose.ui.draw.clip
&nbsp;import androidx.compose.ui.graphics.Color
&nbsp;import androidx.compose.ui.layout.ContentScale
&nbsp;import androidx.compose.ui.platform.LocalContext
&nbsp;import androidx.compose.ui.text.font.FontWeight
&nbsp;import androidx.compose.ui.text.input.KeyboardType
&nbsp;import androidx.compose.ui.unit.Dp
&nbsp;import androidx.compose.ui.unit.dp
&nbsp;import androidx.compose.ui.unit.sp
&nbsp;import androidx.core.content.FileProvider
&nbsp;import coil.compose.rememberAsyncImagePainter
&nbsp;import com.example.proyectodd.model.Usuario
&nbsp;import com.example.proyectodd.viewmodel.PersonajeViewModel
&nbsp;import java.io.File
&nbsp;import java.text.SimpleDateFormat
&nbsp;import java.util.Date
&nbsp;import java.util.Locale
&nbsp;
<b class="nc">&nbsp;private val Bg = Color(0xFF000000)</b>
<b class="nc">&nbsp;private val Card = Color(0xFF292929)</b>
<b class="nc">&nbsp;private val Line = Color(0xFF7F1D1D)</b>
<b class="nc">&nbsp;private val Hint = Color(0xFFFFFFFF)</b>
&nbsp;
&nbsp;@Composable
&nbsp;fun CardDndForm(
&nbsp;    usuario: Usuario,
<b class="nc">&nbsp;    vmExternal: PersonajeViewModel? = null,</b>
<b class="nc">&nbsp;    onCancel: () -&gt; Unit = {},</b>
<b class="nc">&nbsp;    onSaved: () -&gt; Unit = {}</b>
<b class="nc">&nbsp;) {</b>
<b class="nc">&nbsp;    val context = LocalContext.current</b>
&nbsp;
&nbsp;    // ✔ USAR SIEMPRE EL VIEWMODEL ENTREGADO DESDE NavegacionAuth
<b class="nc">&nbsp;    val vm = vmExternal</b>
<b class="nc">&nbsp;        ?: error(&quot;PersonajeViewModel no fue entregado desde NavegacionAuth&quot;)</b>
&nbsp;
<b class="nc">&nbsp;    val estado by vm.estado.collectAsState()</b>
&nbsp;
<b class="nc">&nbsp;    var characterName by remember { mutableStateOf(&quot;&quot;) }</b>
<b class="nc">&nbsp;    var level by remember { mutableStateOf(&quot;&quot;) }</b>
<b class="nc">&nbsp;    var race by remember { mutableStateOf(&quot;&quot;) }</b>
<b class="nc">&nbsp;    var clazz by remember { mutableStateOf(&quot;&quot;) }</b>
<b class="nc">&nbsp;    var background by remember { mutableStateOf(&quot;&quot;) }</b>
<b class="nc">&nbsp;    var alignment by remember { mutableStateOf(&quot;&quot;) }</b>
&nbsp;
<b class="nc">&nbsp;    var str by rememberSaveable { mutableStateOf(&quot;&quot;) }</b>
<b class="nc">&nbsp;    var dex by rememberSaveable { mutableStateOf(&quot;&quot;) }</b>
<b class="nc">&nbsp;    var con by rememberSaveable { mutableStateOf(&quot;&quot;) }</b>
<b class="nc">&nbsp;    var intg by rememberSaveable { mutableStateOf(&quot;&quot;) }</b>
<b class="nc">&nbsp;    var wis by rememberSaveable { mutableStateOf(&quot;&quot;) }</b>
<b class="nc">&nbsp;    var cha by rememberSaveable { mutableStateOf(&quot;&quot;) }</b>
&nbsp;
<b class="nc">&nbsp;    var initiative by rememberSaveable { mutableStateOf(&quot;&quot;) }</b>
<b class="nc">&nbsp;    var ac by rememberSaveable { mutableStateOf(&quot;&quot;) }</b>
<b class="nc">&nbsp;    var passive by rememberSaveable { mutableStateOf(&quot;&quot;) }</b>
<b class="nc">&nbsp;    var hp by rememberSaveable { mutableStateOf(&quot;&quot;) }</b>
<b class="nc">&nbsp;    var saveDC by rememberSaveable { mutableStateOf(&quot;&quot;) }</b>
<b class="nc">&nbsp;    var speed by rememberSaveable { mutableStateOf(&quot;&quot;) }</b>
&nbsp;
<b class="nc">&nbsp;    var playerName by rememberSaveable { mutableStateOf(&quot;&quot;) }</b>
&nbsp;
<b class="nc">&nbsp;    LaunchedEffect(estado.id) {</b>
<b class="nc">&nbsp;        characterName = estado.nombre</b>
<b class="nc">&nbsp;        level = estado.nivel.takeIf { it != 0 }?.toString() ?: &quot;&quot;</b>
<b class="nc">&nbsp;        race = estado.raza</b>
<b class="nc">&nbsp;        clazz = estado.clase</b>
<b class="nc">&nbsp;        background = estado.trasfondo</b>
<b class="nc">&nbsp;        alignment = estado.alineamiento</b>
&nbsp;
<b class="nc">&nbsp;        str = estado.str.takeIf { it != 0 }?.toString() ?: &quot;&quot;</b>
<b class="nc">&nbsp;        dex = estado.dex.takeIf { it != 0 }?.toString() ?: &quot;&quot;</b>
<b class="nc">&nbsp;        con = estado.con.takeIf { it != 0 }?.toString() ?: &quot;&quot;</b>
<b class="nc">&nbsp;        intg = estado.intg.takeIf { it != 0 }?.toString() ?: &quot;&quot;</b>
<b class="nc">&nbsp;        wis = estado.sab.takeIf { it != 0 }?.toString() ?: &quot;&quot;</b>
<b class="nc">&nbsp;        cha = estado.car.takeIf { it != 0 }?.toString() ?: &quot;&quot;</b>
&nbsp;
<b class="nc">&nbsp;        initiative = estado.iniciativa.takeIf { it != 0 }?.toString() ?: &quot;&quot;</b>
<b class="nc">&nbsp;        ac = estado.ac.takeIf { it != 0 }?.toString() ?: &quot;&quot;</b>
<b class="nc">&nbsp;        passive = estado.percepcionPasiva.takeIf { it != 0 }?.toString() ?: &quot;&quot;</b>
<b class="nc">&nbsp;        hp = estado.hp.takeIf { it != 0 }?.toString() ?: &quot;&quot;</b>
<b class="nc">&nbsp;        saveDC = estado.saveDC.takeIf { it != 0 }?.toString() ?: &quot;&quot;</b>
<b class="nc">&nbsp;        speed = estado.velocidad.takeIf { it != 0 }?.toString() ?: &quot;&quot;</b>
&nbsp;
<b class="nc">&nbsp;        playerName = usuario.nombre</b>
&nbsp;    }
&nbsp;
<b class="nc">&nbsp;    Box(</b>
<b class="nc">&nbsp;        Modifier</b>
<b class="nc">&nbsp;            .fillMaxSize()</b>
<b class="nc">&nbsp;            .background(Bg)</b>
<b class="nc">&nbsp;            .padding(12.dp)</b>
<b class="nc">&nbsp;            .verticalScroll(rememberScrollState())</b>
&nbsp;    ) {
&nbsp;
<b class="nc">&nbsp;        Column(</b>
<b class="nc">&nbsp;            Modifier</b>
<b class="nc">&nbsp;                .fillMaxWidth()</b>
<b class="nc">&nbsp;                .clip(RoundedCornerShape(18.dp))</b>
<b class="nc">&nbsp;                .background(Card)</b>
<b class="nc">&nbsp;                .border(1.dp, Line, RoundedCornerShape(18.dp))</b>
<b class="nc">&nbsp;                .padding(14.dp)</b>
&nbsp;        ) {
&nbsp;
&nbsp;            // -----------------------
&nbsp;            // HEADER: NAME + LEVEL
&nbsp;            // -----------------------
<b class="nc">&nbsp;            Row(Modifier.fillMaxWidth(), verticalAlignment = Alignment.Bottom) {</b>
<b class="nc">&nbsp;                BannerField1(</b>
<b class="nc">&nbsp;                    label = &quot;CHARACTER NAME&quot;,</b>
<b class="nc">&nbsp;                    value = characterName,</b>
<b class="nc">&nbsp;                    onValueChange = {</b>
<b class="nc">&nbsp;                        characterName = it</b>
<b class="nc">&nbsp;                        vm.setNombre(it)</b>
&nbsp;                    }
&nbsp;                )
<b class="nc">&nbsp;                Spacer(Modifier.width(1.dp))</b>
<b class="nc">&nbsp;                SmallBadge(</b>
<b class="nc">&nbsp;                    label = &quot;LEVEL&quot;,</b>
<b class="nc">&nbsp;                    value = level,</b>
<b class="nc">&nbsp;                    onValueChange = {</b>
<b class="nc">&nbsp;                        level = it.filter(Char::isDigit).take(2)</b>
<b class="nc">&nbsp;                        vm.setNivel(level)</b>
&nbsp;                    },
<b class="nc">&nbsp;                    width = 80.dp</b>
&nbsp;                )
<b class="nc">&nbsp;                Spacer(Modifier.width(1.dp))</b>
<b class="nc">&nbsp;                PortraitPicker(</b>
<b class="nc">&nbsp;                    portraitUri = estado.portraitUri,</b>
<b class="nc">&nbsp;                    onPicked = { uri -&gt; vm.setPortrait(uri) }</b>
&nbsp;                )
<b class="nc">&nbsp;            }</b>
&nbsp;
&nbsp;            // -----------------------
&nbsp;            // BASIC FIELDS
&nbsp;            // -----------------------
<b class="nc">&nbsp;            Row(</b>
<b class="nc">&nbsp;                Modifier</b>
<b class="nc">&nbsp;                    .fillMaxWidth()</b>
<b class="nc">&nbsp;                    .padding(top = 0.dp),</b>
<b class="nc">&nbsp;                horizontalArrangement = Arrangement.spacedBy(8.dp)</b>
&nbsp;            ) {
<b class="nc">&nbsp;                BannerField(</b>
<b class="nc">&nbsp;                    label = &quot;RACE&quot;,</b>
<b class="nc">&nbsp;                    value = race,</b>
<b class="nc">&nbsp;                    onValueChange = { race = it; vm.setRaza(it) },</b>
<b class="nc">&nbsp;                    modifier = Modifier.weight(1f)</b>
&nbsp;                )
<b class="nc">&nbsp;                BannerField(</b>
<b class="nc">&nbsp;                    label = &quot;CLASS&quot;,</b>
<b class="nc">&nbsp;                    value = clazz,</b>
<b class="nc">&nbsp;                    onValueChange = { clazz = it; vm.setClase(it) },</b>
<b class="nc">&nbsp;                    modifier = Modifier.weight(1f)</b>
&nbsp;                )
<b class="nc">&nbsp;            }</b>
&nbsp;
<b class="nc">&nbsp;            Row(</b>
<b class="nc">&nbsp;                Modifier.fillMaxWidth(),</b>
<b class="nc">&nbsp;                horizontalArrangement = Arrangement.spacedBy(8.dp)</b>
&nbsp;            ) {
<b class="nc">&nbsp;                BannerField(</b>
<b class="nc">&nbsp;                    label = &quot;BACKGROUND&quot;,</b>
<b class="nc">&nbsp;                    value = background,</b>
<b class="nc">&nbsp;                    onValueChange = { background = it; vm.setTrasfondo(it) },</b>
<b class="nc">&nbsp;                    modifier = Modifier.weight(1f)</b>
&nbsp;                )
<b class="nc">&nbsp;                BannerField(</b>
<b class="nc">&nbsp;                    label = &quot;ALIGNMENT&quot;,</b>
<b class="nc">&nbsp;                    value = alignment,</b>
<b class="nc">&nbsp;                    onValueChange = { alignment = it; vm.setAlineamiento(it) },</b>
<b class="nc">&nbsp;                    modifier = Modifier.weight(1f)</b>
&nbsp;                )
<b class="nc">&nbsp;            }</b>
&nbsp;
&nbsp;
<b class="nc">&nbsp;            Spacer(Modifier.height(14.dp))</b>
&nbsp;
&nbsp;            // -----------------------
&nbsp;            // STATS
&nbsp;            // -----------------------
<b class="nc">&nbsp;            Row(Modifier.fillMaxWidth(), horizontalArrangement = Arrangement.SpaceBetween) {</b>
<b class="nc">&nbsp;                AbilityBox(&quot;Str&quot;, str) { str = it.digits2(); vm.setStr(str) }</b>
<b class="nc">&nbsp;                AbilityBox(&quot;Dex&quot;, dex) { dex = it.digits2(); vm.setDex(dex) }</b>
<b class="nc">&nbsp;                AbilityBox(&quot;Con&quot;, con) { con = it.digits2(); vm.setCon(con) }</b>
<b class="nc">&nbsp;                AbilityBox(&quot;Int&quot;, intg) { intg = it.digits2(); vm.setIntg(intg) }</b>
<b class="nc">&nbsp;                AbilityBox(&quot;Wis&quot;, wis) { wis = it.digits2(); vm.setSab(wis) }</b>
<b class="nc">&nbsp;                AbilityBox(&quot;Cha&quot;, cha) { cha = it.digits2(); vm.setCar(cha) }</b>
<b class="nc">&nbsp;            }</b>
&nbsp;
<b class="nc">&nbsp;            Spacer(Modifier.height(14.dp))</b>
&nbsp;
<b class="nc">&nbsp;            Row(Modifier.fillMaxWidth()) {</b>
<b class="nc">&nbsp;                Column(</b>
<b class="nc">&nbsp;                    Modifier</b>
<b class="nc">&nbsp;                        .weight(0.35f)</b>
<b class="nc">&nbsp;                        .padding(horizontal = 10.dp),</b>
<b class="nc">&nbsp;                    verticalArrangement = Arrangement.spacedBy(10.dp)</b>
&nbsp;                ) {
<b class="nc">&nbsp;                    ShieldBox(&quot;AC&quot;, ac) { ac = it.digits2(); vm.setAC(ac) }</b>
<b class="nc">&nbsp;                    SquareBox(&quot;P.PERCEPTION&quot;, passive) { passive = it.digits2(); vm.setPercepcionPasiva(passive) }</b>
<b class="nc">&nbsp;                }</b>
<b class="nc">&nbsp;                Column(</b>
<b class="nc">&nbsp;                    Modifier.weight(0.3f),</b>
<b class="nc">&nbsp;                    verticalArrangement = Arrangement.spacedBy(10.dp)</b>
&nbsp;                ) {
<b class="nc">&nbsp;                    SquareBox(&quot;INITIATIVE&quot;, initiative) { initiative = it.signed2(); vm.setIniciativa(initiative) }</b>
<b class="nc">&nbsp;                    SquareBox(&quot;SPELL SAVE DC&quot;, saveDC) { saveDC = it.digits2(); vm.setSaveDC(saveDC) }</b>
<b class="nc">&nbsp;                }</b>
<b class="nc">&nbsp;                Column(</b>
<b class="nc">&nbsp;                    Modifier.weight(0.3f),</b>
<b class="nc">&nbsp;                    verticalArrangement = Arrangement.spacedBy(10.dp)</b>
&nbsp;                ) {
<b class="nc">&nbsp;                    SquareBox(&quot;SPEED&quot;, speed) { speed = it.digits3(); vm.setVelocidad(speed) }</b>
<b class="nc">&nbsp;                    ShieldBox(&quot;HIT POINTS&quot;, hp) { hp = it.digits3(); vm.setHP(hp) }</b>
<b class="nc">&nbsp;                }</b>
<b class="nc">&nbsp;            }</b>
&nbsp;
<b class="nc">&nbsp;            Spacer(Modifier.height(14.dp))</b>
&nbsp;
&nbsp;            // -----------------------
&nbsp;            // PLAYER NAME (usuario)
&nbsp;            // -----------------------
<b class="nc">&nbsp;            BannerField(</b>
<b class="nc">&nbsp;                label = &quot;PLAYER NAME&quot;,</b>
<b class="nc">&nbsp;                value = playerName,</b>
<b class="nc">&nbsp;                onValueChange = { playerName = it; vm.setPlayerName(it) },</b>
<b class="nc">&nbsp;                modifier = Modifier.fillMaxWidth()</b>
&nbsp;            )
&nbsp;
<b class="nc">&nbsp;            Spacer(Modifier.height(16.dp))</b>
<b class="nc">&nbsp;            Row(horizontalArrangement = Arrangement.spacedBy(12.dp)) {</b>
<b class="nc">&nbsp;                OutlinedButton(onClick = onCancel) { Text(&quot;Cancelar&quot;) }</b>
<b class="nc">&nbsp;                Button(onClick = { vm.guardar(onSaved) }) { Text(&quot;Guardar&quot;, color = Color.White) }</b>
<b class="nc">&nbsp;            }</b>
<b class="nc">&nbsp;        }</b>
<b class="nc">&nbsp;    }</b>
<b class="nc">&nbsp;}</b>
&nbsp;
&nbsp;@Composable
<b class="nc">&nbsp;private fun AbilityBox(label: String, score: String, onChange: (String) -&gt; Unit) {</b>
<b class="nc">&nbsp;    val value = score.toIntOrNull() ?: 10</b>
<b class="nc">&nbsp;    val mod = ((value - 10) / 2.0).toInt()</b>
<b class="nc">&nbsp;    Column(horizontalAlignment = Alignment.CenterHorizontally) {</b>
<b class="nc">&nbsp;        Text(label, color = Hint, fontSize = 12.sp, fontWeight = FontWeight.SemiBold)</b>
<b class="nc">&nbsp;        Box(</b>
<b class="nc">&nbsp;            Modifier</b>
<b class="nc">&nbsp;                .width(54.dp)</b>
<b class="nc">&nbsp;                .height(54.dp)</b>
<b class="nc">&nbsp;                .clip(RoundedCornerShape(10.dp)),</b>
<b class="nc">&nbsp;            contentAlignment = Alignment.Center</b>
&nbsp;        ) {
<b class="nc">&nbsp;            OutlinedTextField(</b>
<b class="nc">&nbsp;                value = score,</b>
<b class="nc">&nbsp;                onValueChange = onChange,</b>
<b class="nc">&nbsp;                singleLine = true,</b>
<b class="nc">&nbsp;                modifier = Modifier</b>
<b class="nc">&nbsp;                    .height(45.dp)</b>
<b class="nc">&nbsp;                    .fillMaxWidth(),</b>
<b class="nc">&nbsp;                colors = OutlinedTextFieldDefaults.colors(</b>
<b class="nc">&nbsp;                    focusedBorderColor = Line,</b>
<b class="nc">&nbsp;                    unfocusedBorderColor = Line.copy(alpha = .5f),</b>
<b class="nc">&nbsp;                    cursorColor = Line</b>
&nbsp;                ),
<b class="nc">&nbsp;                keyboardOptions = KeyboardOptions(keyboardType = KeyboardType.Number),</b>
&nbsp;            )
<b class="nc">&nbsp;        }</b>
<b class="nc">&nbsp;        Spacer(Modifier.height(4.dp))</b>
<b class="nc">&nbsp;        Text(if (mod &gt;= 0) &quot;+$mod&quot; else &quot;$mod&quot;, color = Hint, fontSize = 12.sp)</b>
<b class="nc">&nbsp;    }</b>
<b class="nc">&nbsp;}</b>
&nbsp;
&nbsp;@Composable
&nbsp;private fun BannerField1(
&nbsp;    label: String,
&nbsp;    value: String,
&nbsp;    onValueChange: (String) -&gt; Unit,
<b class="nc">&nbsp;    modifier: Modifier = Modifier</b>
<b class="nc">&nbsp;) {</b>
<b class="nc">&nbsp;    Column(</b>
<b class="nc">&nbsp;        modifier</b>
<b class="nc">&nbsp;            .clip(RoundedCornerShape(10.dp))</b>
<b class="nc">&nbsp;            .padding(10.dp)</b>
&nbsp;    ) {
<b class="nc">&nbsp;        Text(label, color = Hint, fontSize = 12.sp, fontWeight = FontWeight.SemiBold)</b>
<b class="nc">&nbsp;        Spacer(Modifier.height(4.dp))</b>
<b class="nc">&nbsp;        OutlinedTextField(</b>
<b class="nc">&nbsp;            value = value,</b>
<b class="nc">&nbsp;            onValueChange = onValueChange,</b>
<b class="nc">&nbsp;            singleLine = true,</b>
<b class="nc">&nbsp;            modifier = Modifier</b>
<b class="nc">&nbsp;                .width(150.dp)</b>
<b class="nc">&nbsp;                .fillMaxWidth(),</b>
<b class="nc">&nbsp;            colors = OutlinedTextFieldDefaults.colors(</b>
<b class="nc">&nbsp;                focusedBorderColor = Line,</b>
<b class="nc">&nbsp;                unfocusedBorderColor = Line.copy(alpha = .5f),</b>
<b class="nc">&nbsp;                cursorColor = Line</b>
&nbsp;            )
&nbsp;        )
<b class="nc">&nbsp;    }</b>
<b class="nc">&nbsp;}</b>
&nbsp;
&nbsp;@Composable
&nbsp;private fun BannerField(
&nbsp;    label: String,
&nbsp;    value: String,
&nbsp;    onValueChange: (String) -&gt; Unit,
<b class="nc">&nbsp;    modifier: Modifier = Modifier</b>
<b class="nc">&nbsp;) {</b>
<b class="nc">&nbsp;    Column(</b>
<b class="nc">&nbsp;        modifier</b>
<b class="nc">&nbsp;            .clip(RoundedCornerShape(10.dp))</b>
<b class="nc">&nbsp;            .padding(10.dp)</b>
&nbsp;    ) {
<b class="nc">&nbsp;        Text(label, color = Hint, fontSize = 12.sp, fontWeight = FontWeight.SemiBold)</b>
<b class="nc">&nbsp;        Spacer(Modifier.height(4.dp))</b>
<b class="nc">&nbsp;        OutlinedTextField(</b>
<b class="nc">&nbsp;            value = value,</b>
<b class="nc">&nbsp;            onValueChange = onValueChange,</b>
<b class="nc">&nbsp;            singleLine = true,</b>
<b class="nc">&nbsp;            modifier = Modifier.fillMaxWidth(),</b>
<b class="nc">&nbsp;            colors = OutlinedTextFieldDefaults.colors(</b>
<b class="nc">&nbsp;                focusedBorderColor = Line,</b>
<b class="nc">&nbsp;                unfocusedBorderColor = Line.copy(alpha = .5f),</b>
<b class="nc">&nbsp;                cursorColor = Line</b>
&nbsp;            )
&nbsp;        )
<b class="nc">&nbsp;    }</b>
<b class="nc">&nbsp;}</b>
&nbsp;
&nbsp;@Composable
&nbsp;private fun SmallBadge(
&nbsp;    label: String,
&nbsp;    value: String,
&nbsp;    onValueChange: (String) -&gt; Unit,
&nbsp;    width: Dp
<b class="nc">&nbsp;) {</b>
<b class="nc">&nbsp;    Column(</b>
<b class="nc">&nbsp;        Modifier</b>
<b class="nc">&nbsp;            .width(width)</b>
<b class="nc">&nbsp;            .clip(RoundedCornerShape(10.dp))</b>
<b class="nc">&nbsp;            .padding(10.dp),</b>
<b class="nc">&nbsp;        horizontalAlignment = Alignment.CenterHorizontally</b>
&nbsp;    ) {
<b class="nc">&nbsp;        Text(label, color = Hint, fontSize = 12.sp, fontWeight = FontWeight.SemiBold)</b>
<b class="nc">&nbsp;        Spacer(Modifier.height(6.dp))</b>
<b class="nc">&nbsp;        OutlinedTextField(</b>
<b class="nc">&nbsp;            value = value,</b>
<b class="nc">&nbsp;            onValueChange = onValueChange,</b>
<b class="nc">&nbsp;            singleLine = true,</b>
<b class="nc">&nbsp;            keyboardOptions = KeyboardOptions(keyboardType = KeyboardType.Number),</b>
<b class="nc">&nbsp;            modifier = Modifier.width(55.dp),</b>
<b class="nc">&nbsp;            colors = OutlinedTextFieldDefaults.colors(</b>
<b class="nc">&nbsp;                focusedBorderColor = Line,</b>
<b class="nc">&nbsp;                unfocusedBorderColor = Line.copy(alpha = .5f),</b>
<b class="nc">&nbsp;                cursorColor = Line</b>
&nbsp;            )
&nbsp;        )
<b class="nc">&nbsp;    }</b>
<b class="nc">&nbsp;}</b>
&nbsp;
&nbsp;@Composable
&nbsp;private fun SquareBox(
&nbsp;    label: String,
&nbsp;    value: String,
&nbsp;    onChange: (String) -&gt; Unit
<b class="nc">&nbsp;) {</b>
<b class="nc">&nbsp;    Column(</b>
<b class="nc">&nbsp;        Modifier</b>
<b class="nc">&nbsp;            .clip(RoundedCornerShape(10.dp))</b>
<b class="nc">&nbsp;            .padding(10.dp),</b>
<b class="nc">&nbsp;        horizontalAlignment = Alignment.CenterHorizontally</b>
&nbsp;    ) {
<b class="nc">&nbsp;        Text(label, color = Hint, fontSize = 12.sp, fontWeight = FontWeight.SemiBold)</b>
<b class="nc">&nbsp;        Spacer(Modifier.height(6.dp))</b>
<b class="nc">&nbsp;        OutlinedTextField(</b>
<b class="nc">&nbsp;            value = value,</b>
<b class="nc">&nbsp;            onValueChange = onChange,</b>
<b class="nc">&nbsp;            singleLine = true,</b>
<b class="nc">&nbsp;            keyboardOptions = KeyboardOptions(keyboardType = KeyboardType.Number),</b>
<b class="nc">&nbsp;            modifier = Modifier.fillMaxWidth(),</b>
<b class="nc">&nbsp;            colors = OutlinedTextFieldDefaults.colors(</b>
<b class="nc">&nbsp;                focusedBorderColor = Line,</b>
<b class="nc">&nbsp;                unfocusedBorderColor = Line.copy(alpha = .5f),</b>
<b class="nc">&nbsp;                cursorColor = Line</b>
&nbsp;            )
&nbsp;        )
<b class="nc">&nbsp;    }</b>
<b class="nc">&nbsp;}</b>
&nbsp;
&nbsp;@Composable
&nbsp;private fun ShieldBox(
&nbsp;    label: String,
&nbsp;    value: String,
&nbsp;    onChange: (String) -&gt; Unit
<b class="nc">&nbsp;) {</b>
<b class="nc">&nbsp;    Column(</b>
<b class="nc">&nbsp;        Modifier</b>
<b class="nc">&nbsp;            .clip(RoundedCornerShape(12.dp))</b>
<b class="nc">&nbsp;            .padding(10.dp),</b>
<b class="nc">&nbsp;        horizontalAlignment = Alignment.CenterHorizontally</b>
&nbsp;    ) {
<b class="nc">&nbsp;        Text(label, color = Hint, fontSize = 12.sp, fontWeight = FontWeight.SemiBold)</b>
<b class="nc">&nbsp;        Spacer(Modifier.height(6.dp))</b>
<b class="nc">&nbsp;        OutlinedTextField(</b>
<b class="nc">&nbsp;            value = value,</b>
<b class="nc">&nbsp;            onValueChange = onChange,</b>
<b class="nc">&nbsp;            singleLine = true,</b>
<b class="nc">&nbsp;            keyboardOptions = KeyboardOptions(keyboardType = KeyboardType.Number),</b>
<b class="nc">&nbsp;            modifier = Modifier.fillMaxWidth(),</b>
<b class="nc">&nbsp;            colors = OutlinedTextFieldDefaults.colors(</b>
<b class="nc">&nbsp;                focusedBorderColor = Line,</b>
<b class="nc">&nbsp;                unfocusedBorderColor = Line.copy(alpha = .5f),</b>
<b class="nc">&nbsp;                cursorColor = Line</b>
&nbsp;            )
&nbsp;        )
<b class="nc">&nbsp;    }</b>
<b class="nc">&nbsp;}</b>
&nbsp;
&nbsp;@Composable
&nbsp;private fun PortraitPicker(
&nbsp;    portraitUri: String?,
&nbsp;    onPicked: (Uri?) -&gt; Unit
<b class="nc">&nbsp;) {</b>
<b class="nc">&nbsp;    val context = LocalContext.current</b>
<b class="nc">&nbsp;    var cameraUri by remember { mutableStateOf&lt;Uri?&gt;(null) }</b>
&nbsp;
<b class="nc">&nbsp;    val pickFromGallery = rememberLauncherForActivityResult(</b>
<b class="nc">&nbsp;        contract = ActivityResultContracts.GetContent()</b>
<b class="nc">&nbsp;    ) { uri -&gt; onPicked(uri) }</b>
&nbsp;
<b class="nc">&nbsp;    val takePicture = rememberLauncherForActivityResult(</b>
<b class="nc">&nbsp;        contract = ActivityResultContracts.TakePicture()</b>
<b class="nc">&nbsp;    ) { success -&gt; if (success) onPicked(cameraUri) }</b>
&nbsp;
<b class="nc">&nbsp;    val requestCameraPermission = rememberLauncherForActivityResult(</b>
<b class="nc">&nbsp;        ActivityResultContracts.RequestPermission()</b>
<b class="nc">&nbsp;    ) { granted -&gt;</b>
<b class="nc">&nbsp;        if (granted) {</b>
<b class="nc">&nbsp;            val uri = createImageUri(context)</b>
<b class="nc">&nbsp;            cameraUri = uri</b>
<b class="nc">&nbsp;            takePicture.launch(uri)</b>
&nbsp;        }
&nbsp;    }
&nbsp;
<b class="nc">&nbsp;    Column(</b>
<b class="nc">&nbsp;        horizontalAlignment = Alignment.CenterHorizontally,</b>
<b class="nc">&nbsp;        modifier = Modifier</b>
<b class="nc">&nbsp;            .width(97.dp)</b>
<b class="nc">&nbsp;            .height(130.dp)</b>
&nbsp;    ) {
<b class="nc">&nbsp;        val painter = rememberAsyncImagePainter(model = portraitUri)</b>
&nbsp;
<b class="nc">&nbsp;        Box(</b>
<b class="nc">&nbsp;            Modifier</b>
<b class="nc">&nbsp;                .width(97.dp)</b>
<b class="nc">&nbsp;                .height(97.dp)</b>
<b class="nc">&nbsp;                .clip(RoundedCornerShape(10.dp))</b>
<b class="nc">&nbsp;                .background(Color(0xFFE0E0E0))</b>
<b class="nc">&nbsp;                .clickable { pickFromGallery.launch(&quot;image/*&quot;) },</b>
<b class="nc">&nbsp;            contentAlignment = Alignment.Center</b>
&nbsp;        ) {
<b class="nc">&nbsp;            if (portraitUri.isNullOrBlank()) {</b>
<b class="nc">&nbsp;                Text(</b>
<b class="nc">&nbsp;                    text = &quot;Portrait&quot;,</b>
<b class="nc">&nbsp;                    color = Color.Gray,</b>
<b class="nc">&nbsp;                    fontSize = 12.sp,</b>
<b class="nc">&nbsp;                    fontWeight = FontWeight.SemiBold</b>
&nbsp;                )
<b class="nc">&nbsp;            } else {</b>
<b class="nc">&nbsp;                Image(</b>
<b class="nc">&nbsp;                    painter = painter,</b>
<b class="nc">&nbsp;                    contentDescription = &quot;Portrait&quot;,</b>
<b class="nc">&nbsp;                    modifier = Modifier.fillMaxSize(),</b>
<b class="nc">&nbsp;                    contentScale = ContentScale.Crop</b>
&nbsp;                )
&nbsp;            }
<b class="nc">&nbsp;        }</b>
&nbsp;
<b class="nc">&nbsp;        Spacer(Modifier.height(6.dp))</b>
<b class="nc">&nbsp;        Row (modifier = Modifier.fillMaxWidth()) {</b>
<b class="nc">&nbsp;            Button(onClick = { requestCameraPermission.launch(Manifest.permission.CAMERA) }) {</b>
&nbsp;                Text(&quot;Cámara&quot;, color = Color.White)
&nbsp;            }
<b class="nc">&nbsp;        }</b>
<b class="nc">&nbsp;    }</b>
<b class="nc">&nbsp;}</b>
&nbsp;
&nbsp;private fun createImageUri(context: Context): Uri {
<b class="nc">&nbsp;    val time = SimpleDateFormat(&quot;yyyyMMdd_HHmmss&quot;, Locale.getDefault()).format(Date())</b>
<b class="nc">&nbsp;    val storageDir = context.getExternalFilesDir(Environment.DIRECTORY_PICTURES)</b>
<b class="nc">&nbsp;    val file = File.createTempFile(&quot;JPEG_${time}_&quot;, &quot;.jpg&quot;, storageDir)</b>
<b class="nc">&nbsp;    return FileProvider.getUriForFile(</b>
<b class="nc">&nbsp;        context,</b>
<b class="nc">&nbsp;        &quot;${context.packageName}.fileprovider&quot;,</b>
<b class="nc">&nbsp;        file</b>
&nbsp;    )
&nbsp;}
&nbsp;
<b class="nc">&nbsp;private fun String.digits2() = filter(Char::isDigit).take(2)</b>
<b class="nc">&nbsp;private fun String.digits3() = filter(Char::isDigit).take(3)</b>
&nbsp;private fun String.signed2(): String {
<b class="nc">&nbsp;    if (isEmpty()) return this</b>
<b class="nc">&nbsp;    val sign = if (first() == &#39;-&#39; || first() == &#39;+&#39;) first().toString() else &quot;&quot;</b>
<b class="nc">&nbsp;    val body = dropWhile { it == &#39;-&#39; || it == &#39;+&#39; }.filter(Char::isDigit).take(2)</b>
<b class="nc">&nbsp;    return sign + body</b>
&nbsp;}
</code>
</pre>
</div>

<script type="text/javascript">
(function() {
    var msie = false, msie9 = false;
    /*@cc_on
      msie = true;
      @if (@_jscript_version >= 9)
        msie9 = true;
      @end
    @*/

    if (!msie || msie && msie9) {
      hljs.highlightAll()
      hljs.initLineNumbersOnLoad();
    }
})();
</script>

<div class="footer">
    
    <div style="float:right;">generated on 2025-11-29 23:42</div>
</div>
</body>
</html>
